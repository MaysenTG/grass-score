<% content_for :title, "Games" %>

<div class="d-flex justify-content-between align-items-center">
  <h1>Games</h1>
  <div>
    <%= link_to "New game", new_game_path, class: "btn btn-primary", role: "button" %>
  </div>
</div>

<div class="row mb-3">
  <div class="col">
    <%= form_with url: games_path, method: :get, local: true, data: { controller: "games-search", turbo_frame: "games-results" } do |form| %>
      <div class="input-group">
        <%= form.text_field :search, class: "form-control", placeholder: "Search games...", data: { action: "input->games-search#perform", games_search_target: "input" } %>
        <%= form.button "X", class: "btn btn-outline-secondary",  data: { action: "games-search#clearAndRefetch" } %>
      </div>
    <% end %>
  </div>
</div>

<turbo-frame id="games-results">
  <%= render partial: "games_list", locals: { games: @games, query: @query } %>
</turbo-frame>
